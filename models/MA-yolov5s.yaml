# YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license

# Parameters
nc: 5  # number of classes
depth_multiple: 1.0  # model depth multiple
width_multiple: 1.0  # layer channel multiple
anchors:  #æå‰å®šä¹‰çš„ä¸€äº›çŸ©å½¢æ¡†ï¼Œä¸‰è¡Œï¼Œå¯¹åº”ä¸‰ä¸ªä¸åŒçš„ç‰¹å¾å±‚çº§  æ¯ä¸€è¡Œæœ‰ä¸‰ä¸ªanchorå¤§å°ï¼Œä½å±‚è´Ÿè´£é¢„æµ‹å°ç›®æ ‡ï¼Œanchorè¾ƒå°ï¼Œé«˜å±‚è¾ƒå¤§
  - [10,13, 16,30, 33,23]  # P3/8
  - [30,61, 62,45, 59,119]  # P4/16
  - [116,90, 156,198, 373,326]  # P5/32

# YOLOv5 v6.0 backbone
backbone:
  # [from, number, module, args]    #â€˜fromâ€™è¡¨ç¤ºè¯¥å±‚çš„è¾“å…¥æ¥è‡ªå“ªé‡Œï¼Œ-1è¡¨ç¤ºä¸Šä¸€å±‚
                                    #â€˜numberâ€™è¡¨ç¤ºæ¨¡å—æ•°é‡
                                    #â€˜moduleâ€™è¡¨ç¤ºå±‚ç»“æ„ã€‚eg å·ç§¯å±‚
                                    #â€˜argsâ€™è¡¨ç¤ºå‚æ•°ã€‚å®šä¹‰åœ¨å„ä¸ªå±‚å‡½æ•°å†…ï¼Œæ¯ä¸€å±‚éƒ½å¯èƒ½ä¸åŒ

  [[-1, 1, Conv, [32, 6, 2, 2]],  # 0-P1/2  ï¼ˆç¬¬0å±‚çš„ä¸Šä¸€å±‚è¾“å…¥å°±æ˜¯RGBä¸‰é€šé“å›¾ç‰‡ï¼‰ '2'ç»è¿‡æ­¥é•¿ä¸º2çš„å·ç§¯ï¼Œå›¾ç‰‡å¤§å°å˜ä¸ºåŸå›¾çš„äºŒåˆ†ä¹‹ä¸€
   [-1, 1, RepVGGBlock, [64, 3, 2]],  # 1-P2/4  â€˜4â€™ç»è¿‡æ­¥é•¿ä¸º2çš„å·ç§¯ï¼Œå›¾ç‰‡å¤§å°å˜ä¸ºä¸Šä¸€æ­¥çš„äºŒåˆ†ä¹‹ä¸€ï¼ŒåŸå›¾çš„å››åˆ†ä¹‹ä¸€
   [-1, 1, C3_EMA, [64]],              #C3: bottleneckæ®‹å·®ç»“æ„ï¼Œæ•°é‡ä¸º3
   [-1, 1, RepVGGBlock, [128, 3, 2]],  # 3-P3/8
   [-1, 2, C3_EMA, [128]],
   [-1, 1, RepVGGBlock, [256, 3, 2]],  # 5-P4/16
   [-1, 3, C3_EMA, [256]],
   [-1, 1, RepVGGBlock, [512, 3, 2]],  # 7-P5/32
   [-1, 1, C3_EMA, [512]],
   [-1, 1, SPPF, [512, 5]],  # 9
  ]

# YOLOv5 v6.0 head
head:
  [[-1, 1, GSConv, [256, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],      #â€˜upsampleâ€™ä¸Šé‡‡æ ·
   [[-1, 6], 1, Concat, [1]],  # cat backbone P4  [-1, 6] è¡¨ç¤ºè¾“å…¥æ¥è‡ªä¸Šä¸€å±‚ä¸ç¬¬å…­å±‚   â€˜concatâ€™æ‹¼æ¥
   [-1, 1, VoVGSCSP, [256, False]],  # 13

   [-1, 1, GSConv, [128, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 4], 1, Concat, [1]],  # cat backbone P3
   [-1, 1, VoVGSCSP, [128, False]],  # 17 (P3/8-small)é¢„æµ‹å°ç›®æ ‡
   [-1, 1, CBAM, [128]],             #18

   [-1, 1, GSConv, [128, 3, 2]],
   [[-1, 14], 1, Concat, [1]],  # cat head P4
   [-1, 1, VoVGSCSP, [256, False]],  # 21 (P4/16-medium)
   [-1, 1, CBAM, [256]],

   [-1, 1, GSConv, [256, 3, 2]],
   [[-1, 10], 1, Concat, [1]],  # cat head P5
   [-1, 1, VoVGSCSP, [512, False]],  # 25 (P5/32-large)
   [-1, 1, CBAM, [512]],

   [[18, 22, 26], 1, Decoupled_Detect, [nc, anchors]],  # Detect(P3, P4, P5)
  ]
